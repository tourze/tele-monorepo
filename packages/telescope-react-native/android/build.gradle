buildscript {
    ext {
        buildToolsVersion = "34.0.0"
        minSdkVersion = 24
        compileSdkVersion = 34
        targetSdkVersion = 34
        ndkVersion = "26.1.10909125"
        kotlinVersion = "1.9.22"
        androidXBrowser = "1.8.0"
    }
    repositories {
        google()
        mavenCentral()
        maven { url 'https://jitpack.io' }
    }
    dependencies {
        classpath("com.android.tools.build:gradle")
        classpath("com.facebook.react:react-native-gradle-plugin")
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin")

      classpath "com.newrelic.agent.android:agent-gradle-plugin:7.6.2"

      // 字符串混淆
        classpath 'com.github.megatronking.stringfog:gradle-plugin:5.1.0'
        // 选用加解密算法库，默认实现了xor算法，也可以使用自己的加解密库。
        classpath 'com.github.megatronking.stringfog:xor:5.0.0'

        // DEX控制流混淆
        classpath "com.github.CodingGay:BlackObfuscator-ASPlugin:3.9"

        // 生成一些垃圾代码，增加反编译的难度
        classpath "com.github.qq549631030:android-junk-code:1.3.3" //x.x.x换成最新的插件版本号
    }
}

apply plugin: "com.facebook.react.rootproject"

// 将所有位于 node_modules 下的原生模块的 buildDir 重定向到本工程可写目录，避免因 node_modules 权限导致的构建失败
subprojects { subproject ->
    if (subproject.projectDir?.path?.contains("/node_modules/")) {
        subproject.buildDir = file("${rootProject.projectDir}/build/${subproject.name}")
    }
}
