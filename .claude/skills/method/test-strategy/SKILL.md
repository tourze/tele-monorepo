---
name: method-test-strategy
description: 规划测试金字塔、覆盖范围与验证节奏，确保质量门与风险匹配。
---

# 测试策略规划技能

## 适用场景
- 新项目或重大变更需要定义测试矩阵与质量门。
- 多技术栈协同，需要统一测试金字塔与覆盖目标。
- 评估测试缺口、优化执行顺序、对接验收标准。

## 前置准备
- 获取业务目标、关键流程、风险评估、发布节奏。
- 收集现有测试资产（单测/集成/E2E/回归脚本）。
- 明确团队资源、环境、工具链限制。

## 操作步骤
1. **测试金字塔设计**
   - 明确单测（数量最多、执行最快）、服务/组件测试、集成测试、端到端回归占比。
   - 结合风险矩阵决定哪些路径需要端到端或混沌测试。
   - 定义覆盖率指标：代码覆盖、功能覆盖、风险覆盖。
2. **测试清单与优先级**
   - 按业务流程列出测试项，标记 P0/P1/P2。
   - 将非功能（性能、安全、兼容性、可访问性）纳入清单。
   - 指定 Owner、执行时机（每次提交/每日/发布前）。
3. **自动化与手工分界**
   - 确定哪些场景自动化（稳定、重复、关键路径），哪些保留手工（探索、视觉、一次性）。
   - 制定管线执行顺序：Lint → 单测 → 组件/服务 → 集成 → E2E → 回归。
4. **环境与数据**
   - 明确测试环境矩阵（Dev/Staging/Prod-like），定义数据刷新策略。
   - 规划测试数据（脱敏、生成、回放），避免污染生产数据。
5. **衡量与反馈**
   - 建立测试指标（失败率、修复时长、覆盖率、缺陷逃逸率）。
   - 定期评审测试效果，调整策略或补充脚本。

## 质量校验
- 测试金字塔定义完整，覆盖关键业务流程与风险。
- 每个测试项有 Owner、执行频率、验证方法。
- 数据与环境策略可复现、可审计。
- 测试指标可以自动收集并建立基线。

## 失败与回滚
- 测试缺口导致回归：立即补测或制定专项补齐计划。
- 自动化不稳定：回滚至稳定脚本，排查环境/数据问题。
- 测试策略与资源不匹配：调整优先级或申请额外资源。

## 交付物
- 测试策略文档（测试金字塔、清单、指标）。
- 执行计划（频率、Owner、环境、数据）。
- 改进项与后续迭代计划。
