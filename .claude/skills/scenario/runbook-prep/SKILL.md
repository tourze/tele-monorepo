---
name: scenario-runbook-prep
description: 编写与维护 Runbook，覆盖操作步骤、监控、回滚与应急联络。
---

# Runbook 准备技能

## 适用场景
- 新服务上线、重大变更、关键任务需要 Runbook 支撑。
- 运维、值班、应急处理需要标准化流程。
- 审计或知识传承需要可复核的操作手册。

## Runbook 必备结构
1. **概览**：服务名称、版本、负责人、最后更新时间。
2. **依赖关系**：数据库、缓存、消息队列、外部服务。
3. **操作清单**：启动/停止/重启/扩容等步骤。
4. **监控与报警**：指标、阈值、仪表盘链接、报警渠道。
5. **故障处理**：常见问题、排查步骤、应急脚本。
6. **回滚策略**：代码、配置、数据的回退流程。
7. **联络清单**：团队、伙伴、升级路径，含值班联系方式。

## 操作步骤
1. **收集信息**
   - 采访开发、运维、QA，确认依赖、脚本、阈值。
   - 整理服务拓扑、数据流、访问入口。
2. **编写内容**
   - 使用 Markdown 结构化书写；提供命令示例与注意事项。
   - 对破坏性命令添加 ⚠️ 提示，注明前置条件。
   - 提供截图或链接说明仪表盘、报警策略。
3. **验证流程**
   - 组内演练：按 Runbook 重跑关键步骤（启动、回滚）。
   - 校验监控链接、报警机制是否可用。
   - 更新文档中引用的脚本路径与版本。
4. **发布与归档**
   - 将 Runbook 存放在团队约定位置（docs/runbook、内网 Wiki）。
   - 在提交或发布说明中引用 Runbook 链接。
5. **维护与迭代**
   - 变更发生后及时更新 Runbook。
   - 定期（每季度/每迭代）进行回顾，补充新场景。

## 质量校验
- Runbook 信息完整、指令可执行、步骤有验证。
- 链接均可访问，监控/报警策略与环境一致。
- 回滚步骤经过实际演练或 Dry-run。

## 失败与回滚
- Runbook 信息过期：立刻标注“需更新”，通知 Owner。
- 执行步骤失败：记录错误日志，更新文档，必要时补充自动化脚本。
- 文件丢失或冲突：从版本控制恢复，重新审核。

## 交付物
- Runbook 文档链接、版本号、审批记录。
- 演练结果与改进反馈。
- 更新计划与责任人列表。
