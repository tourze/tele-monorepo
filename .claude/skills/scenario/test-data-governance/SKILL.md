---
name: scenario-test-data-governance
description: 管理测试数据生命周期，确保可重复、可审计、无敏感信息泄露。
---

# 测试数据治理技能

## 适用场景
- 多环境测试需要稳定的数据基线。
- 需要脱敏生产数据或构建合成数据。
- 回归/性能测试需快速复原数据状态。

## 前置准备
- 明确测试环境、数据库、外部依赖。
- 收集数据分类（公开、敏感、机密）与合规要求。
- 确定数据刷新频率与自动化工具链。

## 操作步骤
1. **数据分类与策略**
   - 标记数据类型：模拟数据、脱敏数据、生产影子数据。
   - 定义访问权限与审批流程。
2. **数据生成/脱敏**
   - 使用脱敏脚本处理生产数据（掩码、哈希、范围压缩）。
   - 建立合成数据生成器（Faker、Factory、Foundry）。
   - 对时间相关数据设定动态生成规则。
3. **数据版本管理**
   - 为测试数据创建版本号、描述、变更日志。
   - 使用存储（S3、Git LFS）保存 SQL/JSON/CSV。
   - 每次测试前装载指定版本，测试后恢复基线。
4. **环境隔离**
   - 各环境使用独立数据库/命名空间。
   - 对并行测试使用临时 schema 或容器。
5. **监控与审计**
   - 记录数据访问日志，标注操作者与时间。
   - 周期性审查数据质量、覆盖率、合规性。

## 质量校验
- 数据生成/脱敏脚本可复现，无敏感泄露。
- 数据版本信息完整，支持回滚。
- 测试失败可通过数据快照快速重现。

## 失败与回滚
- 数据污染：使用备份快速还原，追踪污染源。
- 脱敏失效：立即停止使用该数据集，补救并重新脱敏。
- 数据不足：补充生成器或扩充数据集，记录缺口。

## 交付物
- 数据分类表与策略文档。
- 脱敏脚本/生成器、版本目录。
- 数据加载/恢复 Runbook 与审计报告。
